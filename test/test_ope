#!/usr/bin/env bash
set -euo pipefail

if [ $# -ne 1 ]; then
  echo "Usage: $0 SUFFIX"
  exit 1
fi

program="./smarttill"
timestamp="$(date +%Y%m%dT%H%M%S)"
base_arg="epo:12345678:123456:12345678:${timestamp}:"
suffix="$1"

# split base into program + args, append suffix as last argument, execute
args="${base_arg}${suffix}"

echo "Executing: $program $args"
exec "$program" "$args"
